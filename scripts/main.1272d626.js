var TempoControl=React.createClass({displayName:"TempoControl",handleChange:function(){var a=React.findDOMNode(this.refs.bpm);this.props.onBpmChange(Math.ceil(60/a.value*250))},render:function(){return React.createElement("div",{id:"control-panel"},React.createElement("form",null,React.createElement("div",{className:"form-group"},React.createElement("label",{"for":"bpm"},"BPM"),React.createElement("input",{type:"number",className:"form-control",id:"bpm",ref:"bpm",min:"10",max:"120",step:"10",onChange:this.handleChange}))))}}),ButtonRow=React.createClass({displayName:"ButtonRow",render:function(){for(var a=this.props.numButtons,b=[],c=this.props.numButtons*(this.props.id+1);a--;)c--,b.push(React.createElement(Button,{id:c,col:a,row:this.props.id,activate:this.props.buttonActivate,deactivate:this.props.buttonDeactivate}));return React.createElement("ul",{className:"button-row"},b)}}),Button=React.createClass({displayName:"Button",getInitialState:function(){return{active:!1,flash:!1}},classNames:function(a){var b=[];for(var c in a)a[c]&&b.push(c);return b.join(" ")},activate:function(){this.setState({active:!this.state.active}),this.state.active?(this.setState({flash:!1}),this.props.deactivate(this.props.id)):this.props.activate(this)},render:function(){var a=this.classNames({active:this.state.active,flash:this.state.flash});return React.createElement("li",{className:a,onClick:this.activate})}}),Indicator=React.createClass({displayName:"Indicator",render:function(){return React.createElement("li",{className:this.props.active===this.props.id?"active":""})}}),SequencerPad=React.createClass({displayName:"SequencerPad",NUM_ROWS:4,sounds:[new Howl({urls:["audio/rimshot.wav"]}),new Howl({urls:["audio/hihat.wav"]}),new Howl({urls:["audio/snare.wav"]}),new Howl({urls:["audio/bass.wav"]})],getInitialState:function(){return this.timer=setInterval(this.updateIndicator,500),{current:0,activeButtons:[],timerInterval:500,numBeats:8}},updateIndicator:function(){var a=this.state.current<this.state.numBeats-1?this.state.current+1:0;this.setState({current:a});for(var b in this.state.activeButtons){var c=this.state.activeButtons[b];c.setState({flash:!1}),a===c.props.col&&(c.setState({flash:!0}),_.isUndefined(this.sounds[c.props.row])||this.sounds[c.props.row].play())}},activate:function(a){this.state.activeButtons.push(a)},deactivate:function(a){this.state.activeButtons=_.filter(this.state.activeButtons,function(b){return b.props.id!=a})},updateBpm:function(a){clearInterval(this.timer),this.setState({bpm:a}),this.timer=setInterval(this.updateIndicator,a)},addBeat:function(){this.state.numBeats<8&&this.setState({numBeats:this.state.numBeats+1}),this.clearActiveButtons()},removeBeat:function(){this.state.numBeats>4&&this.setState({numBeats:this.state.numBeats-1}),this.clearActiveButtons()},clearActiveButtons:function(){for(var a in this.state.activeButtons){var b=this.state.activeButtons[a];b.setState({active:!1,flash:!1})}this.state.activeButtons=[]},render:function(){for(var a=this.NUM_ROWS,b=[];a--;)b.push(React.createElement("li",null,React.createElement(ButtonRow,{id:a,buttonActivate:this.activate,buttonDeactivate:this.deactivate,numButtons:this.state.numBeats}),React.createElement("div",{className:"clearfix"})));for(var a=this.state.numBeats,c=[];a--;)c.push(React.createElement(Indicator,{ref:"indicator"+a,active:this.state.current,id:a}));return React.createElement("div",{id:"sequencer"},React.createElement("div",{className:"main-pad"},React.createElement("div",{className:"control-panel left"},React.createElement(TempoControl,{onBpmChange:this.updateBpm})),React.createElement("ul",{className:"indicators"},c),React.createElement("ul",{className:"beatpad"},b),React.createElement("div",{className:"control-panel right add-remove-beats"},React.createElement("div",{className:"btn-group",role:"group"},React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.removeBeat},React.createElement("span",{className:"glyphicon glyphicon-chevron-left"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:this.addBeat},React.createElement("span",{className:"glyphicon glyphicon-chevron-right"}))))),React.createElement("button",{className:"btn round-button add-channel"},React.createElement("span",{className:"glyphicon glyphicon-plus"})))}});React.render(React.createElement(SequencerPad,null),document.getElementById("app"));